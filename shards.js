const axios = require('axios');
const earnPlayerXp = "https://steam.live.bhvrdbd.com/api/v1/extensions/playerLevels/earnPlayerXp"
const UserAgent = "DeadByDaylight/++DeadByDaylight+Live-CL-329560 Windows/10.0.19041.1.256.64bit"

// <!---------------------------------------!>
const wantedBalance = 500000
const bhvrSession = "bhvrSession="
// <!---------------------------------------!>

var body = {
    data: {
        matchTime: 1000,
        isFirstMatch: true,
        consecutiveMatch: 1,
        playerType: "killer",
        emblemQualities: [
            "Iridescent",
            "Iridescent",
            "Iridescent",
            "Iridescent"
        ],
        platformVersion: "steam",
        levelVersion: 1
    }
}

function loop(){
    axios({method: "POST", url: earnPlayerXp, data: body, headers: {'Cookie': bhvrSession, 'User-Agent': UserAgent }}).then(response => {
        if (response.data.hasOwnProperty("updatedWallet")){
            console.log(`Balance: ${response.data.updatedWallet[0].balance}`)
            if (response.data.updatedWallet[0].balance > wantedBalance){
                return
            }
        }
        body.data.levelVersion = response.data.levelInfo.levelVersion
        loop()
    }).catch(error => {
        console.log(error.response.data.message)
    }) 
}

loop()