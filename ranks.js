const axios = require('axios');
const pips = "https://steam.live.bhvrdbd.com/api/v1/ranks/pips"
const UserAgent = "DeadByDaylight/++DeadByDaylight+Live-CL-329560 Windows/10.0.19041.1.256.64bit"

// <!---------------------------------------!>
const killerRank = 1 
const survivorRank = 1
const bhvrSession = "bhvrSession="
// <!---------------------------------------!>

const body = {
    survivorPips: 2,
    killerPips: 2,
    forceReset: true
}

function GetRank(pips){
    if (pips < 6) {
        return (20 - Math.floor(pips / 3))
    }
    if (pips < 30) {
        return (18 - Math.floor((pips - 6) / 4))
    }
    return (12 - Math.floor((pips - 30) / 5))
}

function loop(){
    axios({method: "PUT", url: pips, data: body, headers: {'Cookie': bhvrSession, 'User-Agent': UserAgent }}).then(response => {
        sRank = GetRank(response.data.survivorPips)
        kRank = GetRank(response.data.killerPips)
        console.log('Survivor: ', sRank, " Killer: ", kRank)
        if (killerRank < kRank || survivorRank < sRank ){
            loop()
        }
    }).catch(error => {
        console.log(error.response.data.message)
    }) 
}

loop()