const axios = require('axios');
const grantCurrency = "https://steam.live.bhvrdbd.com/api/v1/extensions/rewards/grantCurrency/"
const UserAgent = "DeadByDaylight/++DeadByDaylight+Live-CL-329560 Windows/10.0.19041.1.256.64bit"

// <!---------------------------------------!>
const wantedBalance = 1000000
const bhvrSession = "bhvrSession="
// <!---------------------------------------!>

var body = {
    data:{
        rewardType: "Story",
        walletToGrant:{
            balance: 1,
            currency: "Bloodpoints"
        }
    }
}


function loop(){
    axios({method: "POST", url: grantCurrency, data: body, headers: {'Cookie': bhvrSession, 'User-Agent': UserAgent }}).then(response => {
        curBalance = response.data.balance
        console.log('Balance: ', curBalance)
        diff = wantedBalance - curBalance
        grantBalance = diff < 100000 ? diff : 100000
        if (diff != 0 && wantedBalance <= 1000000 ){
            loop()
        }
    }).catch(error => {
        console.log(error.response.data.message)
    }) 
}

loop()